---
- pause:
    prompt: "Token API pour Zurg (https://real-debrid.com/apitoken) | Appuyer sur [Enter]"
    echo: yes
  register: token

- set_fact:
    token: "{{ token.user_input }}"

- name: Creating paths
  become: yes
  file: "path={{item}} state=directory mode=0775 owner={{ lookup('env','MYUID') }} group={{ lookup('env','MYGID') }}"
  with_items:
    - "{{ settings.storage }}/docker/{{ lookup('env','USER') }}/{{pgrole}}"    
    - "{{ settings.storage }}/docker/{{ lookup('env','USER') }}/{{pgrole}}/zurgdata"  
    - "{{ lookup('env', 'HOME') }}/seedbox/zurg"

- name: Import config.xlm zurg
  become: yes
  template:
    src: "{{ settings.source }}/includes/dockerapps/templates/{{pgrole}}/config.yml.j2"
    dest: "{{ settings.storage }}/docker/{{ lookup('env','USER') }}/{{pgrole}}/config.yml"
    owner: "{{lookup('env','MYUID')}}"
    group: "{{lookup('env','MYGID')}}"
    mode: 0644
    force: yes
